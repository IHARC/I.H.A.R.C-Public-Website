document.addEventListener("DOMContentLoaded",()=>{window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.documentElement.style.setProperty("--animation-duration","0.01ms")});class E{container;config;previousFocus=null;isActive=!1;constructor(t,e={}){this.container=t,this.config={escapeDeactivates:!0,clickOutsideDeactivates:!0,returnFocusOnDeactivate:!0,...e}}activate(){if(this.isActive)return;this.previousFocus=document.activeElement,this.isActive=!0;const t=this.getFirstFocusableElement();t&&t.focus(),document.addEventListener("keydown",this.handleKeyDown),this.config.clickOutsideDeactivates&&document.addEventListener("click",this.handleClickOutside)}deactivate(){this.isActive&&(this.isActive=!1,document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("click",this.handleClickOutside),this.config.returnFocusOnDeactivate&&this.previousFocus&&this.previousFocus.focus())}handleKeyDown=t=>{if(this.isActive){if(t.key==="Escape"&&this.config.escapeDeactivates){t.preventDefault(),this.deactivate();return}t.key==="Tab"&&this.handleTabKey(t)}};handleTabKey=t=>{const e=this.getFocusableElements(),s=e[0],n=e[e.length-1];t.shiftKey?document.activeElement===s&&(t.preventDefault(),n?.focus()):document.activeElement===n&&(t.preventDefault(),s?.focus())};handleClickOutside=t=>{this.container.contains(t.target)||this.deactivate()};getFocusableElements(){const t=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(", ");return Array.from(this.container.querySelectorAll(t))}getFirstFocusableElement(){return this.getFocusableElements()[0]||null}}class u{button;menu;isOpen=!1;focusTrap=null;constructor(){this.button=document.getElementById("mobile-menu-button"),this.menu=document.getElementById("mobile-menu"),this.button&&this.menu&&this.init()}init(){this.button.addEventListener("click",this.toggle.bind(this)),this.focusTrap=new E(this.menu),window.addEventListener("resize",()=>{window.innerWidth>=1024&&this.isOpen&&this.close()})}toggle(){this.isOpen?this.close():this.open()}open(){this.isOpen=!0,this.button.setAttribute("aria-expanded","true"),this.menu.classList.remove("hidden"),this.updateButtonAnimation(),this.focusTrap?.activate()}close(){this.isOpen=!1,this.button.setAttribute("aria-expanded","false"),this.menu.classList.add("hidden"),this.updateButtonAnimation(),this.focusTrap?.deactivate()}updateButtonAnimation(){const t=this.button.querySelectorAll("span");this.isOpen?(t[0]?.classList.add("rotate-45","translate-y-1.5"),t[1]?.classList.add("opacity-0"),t[2]?.classList.add("-rotate-45","-translate-y-1.5")):(t[0]?.classList.remove("rotate-45","translate-y-1.5"),t[1]?.classList.remove("opacity-0"),t[2]?.classList.remove("-rotate-45","-translate-y-1.5"))}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>new u):new u;const L={easeOut:i=>1-Math.pow(1-i,3)};function S(i,t={}){const{duration:e=2e3,easing:s=L.easeOut,onUpdate:n,onComplete:a}=t;return new Promise(o=>{const c=performance.now(),r=0;function l(p){const b=p-c,d=Math.min(b/e,1),g=s(d),y=Math.floor(r+(i-r)*g);n?.(y),d<1?requestAnimationFrame(l):(n?.(i),a?.(),o())}requestAnimationFrame(l)})}function v(i,t={}){const e={root:null,rootMargin:"0px",threshold:.1,...t};return new IntersectionObserver(i,e)}function h(i="[data-counter]"){const t=document.querySelectorAll(i);if(t.length===0)return;const e=v(s=>{s.forEach(n=>{if(n.isIntersecting&&!n.target.hasAttribute("data-counted")){const a=n.target,o=parseInt(a.dataset.counter||"0",10),c=parseInt(a.dataset.duration||"2000",10);a.setAttribute("data-counted","true"),a.classList.add("animate-count-up"),S(o,{duration:c,onUpdate:r=>{a.textContent=r.toLocaleString()},onComplete:()=>{setTimeout(()=>{a.classList.remove("animate-count-up")},100)}}),e.unobserve(n.target)}})},{threshold:.3});t.forEach(s=>{e.observe(s)})}function m(i="[data-fade-in]"){const t=document.querySelectorAll(i);if(t.length===0)return;const e=v(s=>{s.forEach(n=>{if(n.isIntersecting){const a=n.target,o=parseInt(a.dataset.delay||"0",10);setTimeout(()=>{a.classList.add("animate-fade-in")},o),e.unobserve(n.target)}})},{threshold:.1});t.forEach(s=>{e.observe(s)})}function w(){typeof window>"u"||!("IntersectionObserver"in window)||(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{h(),m()}):(h(),m()))}w();class f{track;prevBtn;nextBtn;indicators;currentSlide=0;autoPlayInterval=null;maxSlides;constructor(){this.track=document.getElementById("news-track"),this.prevBtn=document.getElementById("news-prev"),this.nextBtn=document.getElementById("news-next"),this.indicators=document.querySelectorAll("#news-indicators button"),this.maxSlides=this.indicators.length,this.track&&this.maxSlides>1&&this.init()}init(){this.prevBtn?.addEventListener("click",()=>this.previousSlide()),this.nextBtn?.addEventListener("click",()=>this.nextSlide()),this.indicators.forEach((s,n)=>{s.addEventListener("click",()=>this.goToSlide(n))}),this.startAutoPlay();const t=document.getElementById("news-carousel");t?.addEventListener("mouseenter",()=>this.stopAutoPlay()),t?.addEventListener("mouseleave",()=>this.startAutoPlay()),this.track.querySelectorAll("a, button").forEach(s=>{s.addEventListener("focus",()=>this.stopAutoPlay()),s.addEventListener("blur",()=>this.startAutoPlay())})}goToSlide(t){this.currentSlide=t;const e=-(t*100);this.track.style.transform=`translateX(${e}%)`,this.updateIndicators()}nextSlide(){this.currentSlide=(this.currentSlide+1)%this.maxSlides,this.goToSlide(this.currentSlide)}previousSlide(){this.currentSlide=(this.currentSlide-1+this.maxSlides)%this.maxSlides,this.goToSlide(this.currentSlide)}updateIndicators(){this.indicators.forEach((t,e)=>{t.classList.toggle("bg-brand-red",e===this.currentSlide),t.classList.toggle("bg-gray-300",e!==this.currentSlide)})}startAutoPlay(){this.autoPlayInterval=window.setInterval(()=>{this.nextSlide()},6e3)}stopAutoPlay(){this.autoPlayInterval&&(clearInterval(this.autoPlayInterval),this.autoPlayInterval=null)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>new f):new f;
