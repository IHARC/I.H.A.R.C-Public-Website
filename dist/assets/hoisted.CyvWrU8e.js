document.addEventListener("DOMContentLoaded",()=>{window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.documentElement.style.setProperty("--animation-duration","0.01ms")});class o{container;config;previousFocus=null;isActive=!1;constructor(e,t={}){this.container=e,this.config={escapeDeactivates:!0,clickOutsideDeactivates:!0,returnFocusOnDeactivate:!0,...t}}activate(){if(this.isActive)return;this.previousFocus=document.activeElement,this.isActive=!0;const e=this.getFirstFocusableElement();e&&e.focus(),document.addEventListener("keydown",this.handleKeyDown),this.config.clickOutsideDeactivates&&document.addEventListener("click",this.handleClickOutside)}deactivate(){this.isActive&&(this.isActive=!1,document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("click",this.handleClickOutside),this.config.returnFocusOnDeactivate&&this.previousFocus&&this.previousFocus.focus())}handleKeyDown=e=>{if(this.isActive){if(e.key==="Escape"&&this.config.escapeDeactivates){e.preventDefault(),this.deactivate();return}e.key==="Tab"&&this.handleTabKey(e)}};handleTabKey=e=>{const t=this.getFocusableElements(),s=t[0],n=t[t.length-1];e.shiftKey?document.activeElement===s&&(e.preventDefault(),n?.focus()):document.activeElement===n&&(e.preventDefault(),s?.focus())};handleClickOutside=e=>{this.container.contains(e.target)||this.deactivate()};getFocusableElements(){const e=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(", ");return Array.from(this.container.querySelectorAll(e))}getFirstFocusableElement(){return this.getFocusableElements()[0]||null}}class a{button;menu;isOpen=!1;focusTrap=null;constructor(){this.button=document.getElementById("mobile-menu-button"),this.menu=document.getElementById("mobile-menu"),this.button&&this.menu&&this.init()}init(){this.button.addEventListener("click",this.toggle.bind(this)),this.focusTrap=new o(this.menu,{escapeDeactivates:!0,clickOutsideDeactivates:!0,returnFocusOnDeactivate:!0}),window.addEventListener("resize",()=>{window.innerWidth>=1024&&this.isOpen&&this.close()}),document.addEventListener("focus-trap:deactivate",()=>{this.isOpen&&this.close()})}toggle(){this.isOpen?this.close():this.open()}open(){this.isOpen=!0,this.button.setAttribute("aria-expanded","true"),this.menu.classList.remove("hidden"),this.updateButtonAnimation(),this.focusTrap?.activate()}close(){this.isOpen=!1,this.button.setAttribute("aria-expanded","false"),this.menu.classList.add("hidden"),this.updateButtonAnimation(),this.focusTrap?.deactivate()}updateButtonAnimation(){const e=this.button.querySelectorAll("span");this.isOpen?(e[0]?.classList.add("rotate-45","translate-y-1.5"),e[1]?.classList.add("opacity-0"),e[2]?.classList.add("-rotate-45","-translate-y-1.5")):(e[0]?.classList.remove("rotate-45","translate-y-1.5"),e[1]?.classList.remove("opacity-0"),e[2]?.classList.remove("-rotate-45","-translate-y-1.5"))}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>new a):new a;
